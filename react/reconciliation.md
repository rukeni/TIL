# 리액트 DIFFING ALGORITHMS

두 개의 트리를 비교할 때, 두 엘리멘트의 루트 엘리먼트부터 비교를 시작한다.

## 엘리먼트의 타입이 다른 경우

두 루트 엘리먼트의 타입이 다르면, 리액트는 이전 트리를 버리고 완전히 새로운 트리를 구축한다.

예를들어서, `a`태그가 `img`로 바뀌거나 `Article` 컴포넌트가 `Comment`컴포넌트로 바뀌고 `Button`컴포넌트가 `div`로 바뀌는 것이다.

트리를 버릴때 이전 DOM 노드들은 모두 파괴된다.

이전 트리와 연관된 모든 스테이트는 사라진다.

## 엘리먼트의 타입이 같은 경우

같은 타입의 두 React DOM 엘리먼트를 비교할 때, 리액트는 두 엘리먼트의 속성을 확인하여, 동일한 내용은 유지하고 변경된 속성들만 갱신한다.

예를 들어,

```jsx
<div className="before" title="stuff" />

<div className="after" title="stuff" />
```

이 두 엘리먼트를 비교하면 현재 DOM 노드 상에 className만 수정한다.

DOM 노드의 처리가 끝나면, React는 이어서 해당 노드의 자식들을 재귀적으로 처리한다.

## 같은 타입의 컴포넌트 엘리먼트

컴포넌트가 갱신되면 인스턴스는 동일하게 유지되어 렌더링 간 state가 유지된다.

React는 새로운 엘리먼트의 내용을 반영하기 위해 현재 컴포넌트 인스턴스의 props를 갱신한다.

다음으로 render() 메서드가 호출되고 비교 알고리즘이 이전 결과와 새로운 겨로가를 재귀적으로 처리한다.